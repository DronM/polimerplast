-- View: doc_orders_t_tmp_products_list--DROP VIEW doc_orders_t_tmp_products_list;CREATE OR REPLACE VIEW doc_orders_t_tmp_products_list AS 	SELECT 		t.login_id,		t.view_id,		t.line_number,		t.product_id,		products_descr(p,t.mes_length,t.mes_width,t.mes_height)			AS product_descr,		t.mes_length,		t.mes_width,		t.mes_height,					t.volume,		t.weight,				t.quant_base_measure_unit AS quant,		ROUND(t.quant_base_measure_unit,0) AS quant_descr,		t.quant_confirmed_base_measure_unit,				t.price,		format_money(t.price) AS price_descr,		/*		CASE			WHEN t.quant_base_measure_unit>0 THEN				ROUND(t.total/t.quant_base_measure_unit,2)			ELSE 0		END AS price,		format_money(CASE			WHEN t.quant_base_measure_unit>0 THEN				ROUND(t.total/t.quant_base_measure_unit,2)			ELSE 0		END) AS price_descr,		*/				t.total,		format_money(t.total) AS total_descr,				t.total_pack,		t.pack_exists,		p.base_measure_unit_id AS measure_unit_id,		mu.name AS measure_unit_descr,				t.quant AS doc_quant,		t.measure_unit_id AS doc_measure_unit_id,		mu_doc.name AS doc_measure_unit_descr,				--отгружено в единицах документа		CASE			WHEN t.quant_confirmed_base_measure_unit>0 THEN				(SELECT doc_order_calc_quant(					t.product_id,					t.measure_unit_id,					t.mes_length,					t.mes_width,					t.mes_height,					t.quant_confirmed_base_measure_unit					)				)			ELSE 0		END AS quant_confirmed_measure_unit			FROM doc_orders_t_tmp_products AS t	LEFT JOIN products AS p ON p.id=t.product_id	LEFT JOIN measure_units AS mu ON mu.id=p.base_measure_unit_id	LEFT JOIN measure_units AS mu_doc ON mu_doc.id=t.measure_unit_id	ORDER BY t.line_number;ALTER TABLE doc_orders_t_tmp_products_list OWNER TO polimerplast;